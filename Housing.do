** Ali Bahrami Sani
** Contact: alibahramisani.github.io


** Housing Data 
** With special thanks to my dear friend *Ahmad Seifi* who generously shared his codes with me, which was a great help to me.
* Ahmad Seifi Contact: alef.sin7@gmail.com


** Data Path: https://www.mrud.ir/%D9%85%D8%B3%DA%A9%D9%86/%D8%A7%D9%82%D8%AA%D8%B5%D8%A7%D8%AF-%D9%85%D8%B3%D9%83%D9%86-%D9%88-%D8%A8%D8%B1%D9%86%D8%A7%D9%85%D9%87-%D8%B1%D9%8A%D8%B2%D9%8A/%D8%A2%D9%85%D8%A7%D8%B1-%D9%88-%D8%A7%D8%B7%D9%84%D8%A7%D8%B9%D8%A7%D8%AA#196661381-------



clear

forvalues i = 1(1)9{
import excel "Iran_maskan_koll980`i'.xlsx", sheet("Sheet1") firstrow
rename کدقرارداد id
encode نوعقرارداد ,generate(contType)
rename استان prov
rename شهرستان city
encode نوعملک ,generate(buildingType)
rename منطقهشهرداری district
encode نوعکاربری ,generate(usageType)
rename مساحت area
rename درصد percent
rename قیمت totalPrice
rename قیمتیکمترمربع price
rename عمربنا age
encode نوعاسکلت ,generate(frameType)
rename تاریخثبتقرارداد dateShamsi
replace dateShamsi = subinstr( dateShamsi ,"/" , "", .)
rename ششرقمنخستکدپستی postalCode
* drop نوعقرارداد نوعملک نوعکاربری نوعاسکلت
gen month = `i'

** Provinces
replace prov = subinstr( prov ,"خوزستان" , "6", .)
*replace prov = subinstr( prov ,"آذربايجان شرقي" , "3", .)
replace prov = subinstr( prov ,"آذربایجان شرقی" , "3", .)
replace prov = subinstr( prov ,"تهران" , "23", .)
replace prov = subinstr( prov ,"قم" , "25", .)
replace prov = subinstr( prov ,"ایلام" , "16", .)
*replace prov = subinstr( prov ,"خراسان رضوي" , "9", .)
replace prov = subinstr( prov ,"خراسان رضوی" , "9", .)
replace prov = subinstr( prov ,"كردستان" , "12", .)
replace prov = subinstr( prov ,"اصفهان" , "10", .)
replace prov = subinstr( prov ,"زنجان" , "19", .)
*replace prov = subinstr( prov ,"آذربايجان غربي" , "4", .)
replace prov = subinstr( prov ,"آذربایجان غربی" , "4", .)
replace prov = subinstr( prov ,"گلستان" , "27", .)
replace prov = subinstr( prov ,"بوشهر" , "18", .)
replace prov = subinstr( prov ,"سيستان وبلوچستان" , "11", .)
replace prov = subinstr( prov ,"كرمانشاه" , "5", .)
replace prov = subinstr( prov ,"كرمان" , "8", .)
replace prov = subinstr( prov ,"گیلان" , "1", .)
replace prov = subinstr( prov ,"مازندران" , "2", .)
*replace prov = subinstr( prov ,"مرکزي" , "0", .)
replace prov = subinstr( prov ,"مرکزی" , "0", .)
replace prov = subinstr( prov ,"سمنان" , "20", .)
replace prov = subinstr( prov ,"كهگيلويه وبويراحمد" , "17", .)
replace prov = subinstr( prov ,"فارس" , "7", .)
replace prov = subinstr( prov ,"البرز" , "30", .)
replace prov = subinstr( prov ,"یزد" , "21", .)
*replace prov = subinstr( prov ,"خراسان جنوبي" , "29", .)
replace prov = subinstr( prov ,"خراسان جنوبی" , "29", .)
*replace prov = subinstr( prov ,"چهارمحال وبختياري" , "14", .)
replace prov = subinstr( prov ,"چهارمحال وبختياري" , "14", .)
replace prov = subinstr( prov ,"اردبیل" , "24", .)
replace prov = subinstr( prov ,"لرستان" , "15", .)
replace prov = subinstr( prov ,"هرمزگان" , "22", .)
replace prov = subinstr( prov ,"همدان" , "13", .)
*replace prov = subinstr( prov ,"خراسان شمالي" , "28", .)
replace prov = subinstr( prov ,"خراسان شمالی" , "28", .)
replace prov = subinstr( prov ,"قزوین" , "26", .)

* Counties
replace city = subinstr( city ,"بابلسر", "216",.)
replace city = subinstr( city ,"زاهدان" , "1105", .)
replace city = subinstr( city ,"لالي" , "617", .)
replace city = subinstr( city ,"مرند" , "307", .)
replace city = subinstr( city ,"تهران" , "2301", .)
replace city = subinstr( city ,"قم" , "2501", .)
replace city = subinstr( city ,"رباط كريم" , "2312", .)
replace city = subinstr( city ,"مهران" , "1605", .)
replace city = subinstr( city ,"مشهد" , "916", .)
replace city = subinstr( city ,"مريوان" , "1206", .)
replace city = subinstr( city ,"اسلامشهر" , "2310", .)
replace city = subinstr( city ,"بهار" , "1307", .)
replace city = subinstr( city ,"آباده" , "701", .)
replace city = subinstr( city ,"خوي" , "403", .)
replace city = subinstr( city ,"شهرضا" , "1009", .)
replace city = subinstr( city ,"زنجان" , "1904", .)
replace city = subinstr( city ,"مياندوآب" , "408", .)
replace city = subinstr( city ,"ابهر" , "1901", .)
replace city = subinstr( city ,"تبريز" , "303", .)
replace city = subinstr( city ,"شميرانات" , "2304", .)
replace city = subinstr( city ,"جهرم" , "704", .)
replace city = subinstr( city ,"ملارد" , "2317", .)
replace city = subinstr( city ,"مهاباد" , "407", .)
replace city = subinstr( city ,"اصفهان" , "1002", .)
replace city = subinstr( city ,"قرچك" , "2321", .)
replace city = subinstr( city ,"عجب شير" , "325", .)
replace city = subinstr( city ,"گنبد كاووس" , "2706",.)
replace city = subinstr( city ,"بوشهر" , "1801",.)
replace city = subinstr( city ,"ري" , "2303",.)
replace city = subinstr( city ,"دشتستان" , "1803",.)
replace city = subinstr( city ,"برخوار" , "1022",.)
replace city = subinstr( city ,"کرج" , "3001",.)
replace city = subinstr( city ,"هامون" , "1116",.)
replace city = subinstr( city ,"كرمانشاه" , "502",.)
replace city = subinstr( city ,"كرمان" , "808",.)
replace city = subinstr( city ,"طوالش" , "104",.)
replace city = subinstr( city ,"جويبار" , "221",.)
replace city = subinstr( city ,"تاكستان" , "2602",.)
replace city = subinstr( city ,"زرنديه" , "10",.)
replace city = subinstr( city ,"سنندج" , "1204",.)
replace city = subinstr( city ,"خاش" , "1103",.)
replace city = subinstr( city ,"شاهين دژ" , "411",.)
replace city = subinstr( city ,"مسجدسليمان" , "613",.)
replace city = subinstr( city ,"سمنان" , "2002",.)
replace city = subinstr( city ,"جيرفت" , "803",.)
replace city = subinstr( city ,"سروآباد" , "1209",.)
replace city = subinstr( city ,"باشت" , "1707",.)
replace city = subinstr( city ,"كازرون" , "710",.)
replace city = subinstr( city ,"بهشهر" , "204",.)
replace city = subinstr( city ,"اهواز" , "603",.)
replace city = subinstr( city ,"شيراز" , "707",.)
replace city = subinstr( city ,"قزوين" , "2603",.)
replace city = subinstr( city ,"نوشهر" , "215",.)
replace city = subinstr( city ,"عباس آباد" , "224",.)
replace city = subinstr( city ,"خرم آباد" , "1503",.)
replace city = subinstr( city ,"گرگان" , "2705",.)
replace city = subinstr( city ,"اشکذر" , "2108",.)
replace city = subinstr( city ,"شه2303ار" , "2309",.)
replace city = subinstr( city ,"سا2303" , "207",.)
replace city = subinstr( city ,"مرودشت" , "712",.)
replace city = subinstr( city ,"نجف آباد" , "1014",.)
replace city = subinstr( city ,"1307ستان" , "2319",.)
replace city = subinstr( city ,"اروميه" , "401",.)
replace city = subinstr( city ,"مهدي شهر" , "2005",.)
replace city = subinstr( city ,"دزفول" , "608",.)
replace city = subinstr( city ,"يزد" , "2105",.)
replace city = subinstr( city ,"قصرقند" , "1118",.)
replace city = subinstr( city ,"نيشابور" , "917",.)
replace city = subinstr( city ,"چناران" , "918",.)
replace city = subinstr( city ,"باخرز" , "937",.)
replace city = subinstr( city ,"لنجان" , "1012",.)
replace city = subinstr( city ,"جوانرود" , "509",.)
replace city = subinstr( city ,"بابل" , "202",.)
replace city = subinstr( city ,"فنوج" , "1119",.)
replace city = subinstr( city ,"گرمه" , "2807",.)
replace city = subinstr( city ,"لاهيجان" , "111",.)
replace city = subinstr( city ,"لامرد" , "715",.)
replace city = subinstr( city ,"پيشوا" , "2318",.)
replace city = subinstr( city ,"قاينات" , "2904",.)
replace city = subinstr( city ,"شهركرد" , "1402",.)
replace city = subinstr( city ,"شازند" , "7",.)
replace city = subinstr( city ,"بندر انزلي" , "103",.)
replace city = subinstr( city ,"رشت" , "105",.)
replace city = subinstr( city ,"فيروز آباد" , "709",.)
replace city = subinstr( city ,"اردبيل" , "2401",.)
replace city = subinstr( city ,"سراب" , "305",.)
replace city = subinstr( city ,"مباركه" , "1017",.)
replace city = subinstr( city ,"ملاير" , "1302",.)
replace city = subinstr( city ,"خليل آباد" , "929",.)
replace city = subinstr( city ,"ايذه" , "604",.)
replace city = subinstr( city ,"سلطانيه" , "1910",.)
replace city = subinstr( city ,"گميشان" , "2713",.)
replace city = subinstr( city ,"پارس آباد" , "2406",.)
replace city = subinstr( city ,"قوچان" , "913",.)
replace city = subinstr( city ,"دورود" , "1505",.)
replace city = subinstr( city ,"آبادان" , "601",.)
replace city = subinstr( city ,"سنقر" , "505",.)
replace city = subinstr( city ,"ساوه" , "6",.)
replace city = subinstr( city ,"لردگان" , "1404",.)
replace city = subinstr( city ,"آستانه اشرفيه" , "102",.)
replace city = subinstr( city ,"رفسنجان" , "804",.)
replace city = subinstr( city ,"خمير" , "2210",.)
replace city = subinstr( city ,"آذرشهر" , "321",.)
replace city = subinstr( city ,"ايرانشهر" , "1101",.)
replace city = subinstr( city ,"همدان" , "1304",.)
replace city = subinstr( city ,"آمل" , "201",.)
replace city = subinstr( city ,"دلفان" , "1504",.)
replace city = subinstr( city ,"آق قلا" , "2708",.)
replace city = subinstr( city ,"رضوانشهر", "114",.)
replace city = subinstr( city ,"سرپل ذهاب", "504",.)
replace city = subinstr( city ,"بروجرد", "1502",.)
replace city = subinstr( city ,"بروچرد", "1502",.)
replace city = subinstr( city ,"خرمشهر", "607",.)
replace city = subinstr( city ,"ف2303دونکنار", "223",.)
replace city = subinstr( city ,"مانه و سملقان", "2806",.)
replace city = subinstr( city ,"حميديه", "625",.)
replace city = subinstr( city ,"بدره", "1610",.)
replace city = subinstr( city ,"خور و بيابانک", "1023",.)
replace city = subinstr( city ,"دشت آزادگان", "609",.)
replace city = subinstr( city ,"بيجار", "1202",.)
replace city = subinstr( city ,"ورامين", "2306",.)
replace city = subinstr( city ,"بيرجند", "2901",.)
replace city = subinstr( city ,"سبزوار", "908",.)
replace city = subinstr( city ,"رامسر", "206",.)
replace city = subinstr( city ,"اميديه", "616",.)
replace city = subinstr( city ,"بندرلنگه", "2203",.)
replace city = subinstr( city ,"گناباد", "915",.)
replace city = subinstr( city ,"کميجان", "11",.)
replace city = subinstr( city,"سپيدان", "706",.)
replace city = subinstr( city ,"نور", "214",.)
replace city = subinstr( city ,"شوش", "614",.)
replace city = subinstr( city ,"نهاوند", "1303",.)
replace city = subinstr( city ,"خواف", "919",.)
replace city = subinstr( city ,"علي اباد", "2703",.)
replace city = subinstr( city ,"شادگان", "611",.)
replace city = subinstr( city ,"زرند", "805",.)
replace city = subinstr( city ,"خميني شهر", "1003",.)
replace city = subinstr( city ,"ماكو", "406",.)
replace city = subinstr( city ,"ميناب", "2205",.)
replace city = subinstr( city ,"گرمي", "2405",.)
replace city = subinstr( city ,"سيرجان", "806",.)
replace city = subinstr( city ,"خرامه", "729",.)
replace city = subinstr( city ,"بروجن", "1401",.)
replace city = subinstr( city ,"فرديس", "3006",.)
replace city = subinstr( city ,"ساوجبلاغ", "3002",.)
replace city = subinstr( city ,"بندر ماهشهر", "605",.)
replace city = subinstr( city ,"چا1307", "1102",.)
replace city = subinstr( city ,"خرمدره", "1907",.)
replace city = subinstr( city ,"اسد آباد", "1306",.)
replace city = subinstr( city ,"سراوان", "1106",.)
replace city = subinstr( city ,"تربت حيد2303ه", "906",.)
*replace city = subinstr( city ,"202سر", "216",.)
replace city = subinstr( city ,"قروه", "1205",.)
replace city = subinstr( city ,"شيروان", "2804",.)
replace city = subinstr( city ,"قشم", "2204",.)
replace city = subinstr( city ,"کوهدشت", "1506",.)
replace city = subinstr( city ,"تويسركان", "1301",.)
replace city = subinstr( city ,"بوئين زهرا", "2601",.)
replace city = subinstr( city ,"خدابنده", "1903",.)
replace city = subinstr( city ,"مشگين شهر", "2404",.)
replace city = subinstr( city ,"ه2303س", "316",.)
replace city = subinstr( city ,"اهر", "302",.)
replace city = subinstr( city ,"پارسيان", "2211",.)
replace city = subinstr( city ,"اراك", "1",.)
replace city = subinstr( city ,"بوكان", "410",.)
replace city = subinstr( city ,"سيمرغ", "226",.)
replace city = subinstr( city ,"طارم", "1908",.)
replace city = subinstr( city ,"پاوه", "503",.)
replace city = subinstr( city ,"ماسال", "116",.)
replace city = subinstr( city ,"ميانه", "310",.)
replace city = subinstr( city ,"تربت جام", "906",.)
replace city = subinstr( city ,"دالاهو", "513",.)
replace city = subinstr( city ,"انديمشك", "602",.)
replace city = subinstr( city ,"قائم شهر", "210",.)
replace city = subinstr( city ,"ش302ود", "2003",.)
replace city = subinstr( city ,"ميان1505", "225",.)
replace city = subinstr( city ,"ز2303ن دشت", "719",.)
replace city = subinstr( city ,"شاهين شهر", "1016",.)
replace city = subinstr( city ,"ميامي", "2007",.)
replace city = subinstr( city ,"سردشت", "404",.)
replace city = subinstr( city ,"بندر عباس", "2202",.)
replace city = subinstr( city ,"بشاگرد", "2213",.)
replace city = subinstr( city ,"گلپايگان", "1011",.)
replace city = subinstr( city ,"بندر گناوه", "1807",.)
replace city = subinstr( city ,"تنكابن", "205",.)
replace city = subinstr( city ,"رومشکان", "1511",.)
replace city = subinstr( city ,"گيلانغرب", "508",.)
replace city = subinstr( city ,"بهبهان", "606",.)
replace city = subinstr( city ,"لارستان", "711",.)
replace city = subinstr( city ,"آزادشهر", "2710",.)
replace city = subinstr( city ,"داراب", "705",.)
replace city = subinstr( city ,"راميان", "2711",.)
replace city = subinstr( city ,"حاجي آباد", "2208",.)
replace city = subinstr( city ,"چادگان", "1020",.)
replace city = subinstr( city ,"كاشمر", "914",.)
replace city = subinstr( city ,"اقليد", "703",.)
replace city = subinstr( city ,"املش", "113",.)
replace city = subinstr( city ,"لنگرود", "110",.)
replace city = subinstr( city ,"نطنز", "1015",.)
replace city = subinstr( city ,"صومعه سرا", "108",.)
replace city = subinstr( city ,"صحنه", "510",.)
replace city = subinstr( city ,"فلاورجان", "1008",.)
replace city = subinstr( city ,"آغاجا2303", "626",.)
replace city = subinstr( city ,"هيرمند", "1111",.)
replace city = subinstr( city ,"ميبد", "2106",.)
replace city = subinstr( city ,"بندر ديلم", "1808",.)
replace city = subinstr( city ,"ايلام", "1601",.)
replace city = subinstr( city ,"بافت", "801",.)
replace city = subinstr( city ,"دهگلان", "1210",.)
replace city = subinstr( city ,"کوهرنگ", "1406",.)
replace city = subinstr( city ,"سلسله", "1509",.)
replace city = subinstr( city ,"مه ولات", "930",.)
replace city = subinstr( city ,"مهرستان", "1113",.)
replace city = subinstr( city ,"مراوه تپه", "2712",.)
replace city = subinstr( city ,"دماوند", "2302",.)
replace city = subinstr( city ,"آستارا", "101",.)
replace city = subinstr( city ,"نقده", "409",.)
replace city = subinstr( city ,"پاكدشت", "2313",.)
replace city = subinstr( city ,"نظر آباد", "3003",.)
replace city = subinstr( city ,"سرخه", "2008",.)
replace city = subinstr( city ,"هشترود", "311",.)
replace city = subinstr( city ,"هفتگل", "622",.)
replace city = subinstr( city ,"رزن", "1308",.)
replace city = subinstr( city ,"خمين", "4",.)
replace city = subinstr( city ,"شهر قدس", "2316",.)
replace city = subinstr( city ,"مراغه", "306",.)
replace city = subinstr( city ,"كنگاور", "507",.)
replace city = subinstr( city ,"بويراحمد", "1701",.)
replace city = subinstr( city ,"سقز", "1203",.)
replace city = subinstr( city ,"بستان آباد", "313",.)
replace city = subinstr( city,"سلماس", "405",.)
replace city = subinstr( city ,"نمين", "2408",.)
replace city = subinstr( city ,"گلوگاه", "222",.)
replace city = subinstr( city ,"تايباد", "904",.)
replace city = subinstr( city ,"استهبان", "702",.)
replace city = subinstr( city ,"دوره", "1510",.)
replace city = subinstr( city ,"کوار", "728",.)
replace city = subinstr( city ,"فسا", "708",.)
replace city = subinstr( city ,"بناب", "312",.)
replace city = subinstr( city ,"کلات", "928",.)
replace city = subinstr( city ,"ممسني", "713",.)
replace city = subinstr( city ,"البرز", "2605",.)
replace city = subinstr( city ,"سربيشه", "2903",.)
replace city = subinstr( city ,"كاشان", "1010",.)
replace city = subinstr( city ,"سرايان", "2906",.)
replace city = subinstr( city ,"فومن", "109",.)
replace city = subinstr( city ,"2303گان", "817",.)
replace city = subinstr( city ,"گراش", "727",.)
replace city = subinstr( city ,"چالوس", "220",.)
replace city = subinstr( city ,"سامان", "1408",.)
replace city = subinstr( city ,"کيار", "1407",.)
replace city = subinstr( city ,"جاسک", "2206",.)
replace city = subinstr( city ,"ملکان", "320",.)
replace city = subinstr( city ,"دنا", "1704",.)
replace city = subinstr( city ,"درميان", "2902",.)
replace city = subinstr( city ,"نيک شهر", "1107",.)
replace city = subinstr( city ,"پرديس", "2320",.)
replace city = subinstr( city ,"راز و جرگلان", "2808",.)
replace city = subinstr( city ,"کامياران", "1208",.)
replace city = subinstr( city ,"اردستان", "1001",.)
replace city = subinstr( city ,"ارزوييه", "823",.)
replace city = subinstr( city ,"سرخس", "920",.)
replace city = subinstr( city ,"فارسان", "1403",.)
replace city = subinstr( city ,"بافق", "2102",.)
replace city = subinstr( city ,"خنج", "724",.)
replace city = subinstr( city ,"آبدانان", "1606",.)
replace city = subinstr( city ,"اسلام آباد غرب", "501",.)
replace city = subinstr( city ,"رامهرمز", "610",.)
replace city = subinstr( city ,"جلفا", "319",.)
replace city = subinstr( city ,"شبستر", "314",.)
replace city = subinstr( city ,"روانسر", "514",.)
replace city = subinstr( city ,"مه2303ز", "2104",.)
replace city = subinstr( city ,"بندرتركمن", "2702",.)
replace city = subinstr( city ,"گرمسار", "2004",.)
replace city = subinstr( city ,"خرم بيد", "718",.)
replace city = subinstr( city ,"زاوه", "935",.)
replace city = subinstr( city ,"کهگيلويه", "1702",.)
replace city = subinstr( city ,"تفت", "2103",.)
replace city = subinstr( city ,"رودان", "2207",.)
replace city = subinstr( city ,"رودبار", "106",.)
replace city = subinstr( city ,"سيب و سوران", "1114",.)
replace city = subinstr( city ,"بيله سوار", "2402",.)
replace city = subinstr( city ,"باوي", "624",.)
replace city = subinstr( city ,"فا2303اب", "822",.)
replace city = subinstr( city ,"614تر", "612",.)
replace city = subinstr( city ,"گتوند", "620",.)
replace city = subinstr( city ,"ديواندره", "1207",.)
replace city = subinstr( city ,"دهلران", "1603",.)
replace city = subinstr( city ,"بم", "802",.)
replace city = subinstr( city ,"اشتهارد", "3005",.)
replace city = subinstr( city ,"کبودرآهنگ", "1305",.)
replace city = subinstr( city ,"ازنا", "1507",.)
replace city = subinstr( city ,"پيرانشهر", "402",.)
replace city = subinstr( city ,"چالدران", "414",.)
replace city = subinstr( city ,"خنداب", "12",.)
replace city = subinstr( city ,"بج214د", "2802",.)
replace city = subinstr( city ,"اليگودرز", "1501",.)
replace city = subinstr( city ,"گاليکش", "2714",.)
replace city = subinstr( city ,"کلاله", "2709",.)
replace city = subinstr( city ,"جم", "1809",.)
replace city = subinstr( city ,"زابل", "1104",.)
replace city = subinstr( city ,"بستک", "2209",.)
replace city = subinstr( city ,"بندرگز", "2701",.)
replace city = subinstr( city ,"ايوان", "1607",.)
replace city = subinstr( city ,"شوط", "417",.)
replace city = subinstr( city ,"105خوار", "927",.)
replace city= subinstr( city ,"آبيك", "2604",.)
replace city = subinstr( city ,"بانه", "1201",.)
replace city = subinstr( city ,"طبس", "2911",.)
replace city = subinstr( city ,"106جنوب", "815",.)
replace city = subinstr( city ,"کارون", "627",.)
replace city = subinstr( city ,"هرسين", "511",.)
replace city = subinstr( city ,"گچساران", "1703",.)
replace city = subinstr( city ,"سوادکوه", "208",.)
replace city = subinstr( city ,"محمودآباد", "218",.)
replace city = subinstr( city ,"صالح آباد", "940",.)
replace city = subinstr( city ,"سياهكل", "115",.)
replace city = subinstr( city ,"پلدختر", "1508",.)
replace city = subinstr( city ,"انديکا", "621",.)
replace city = subinstr( city ,"خوشاب", "938",.)
replace city = subinstr( city ,"نيمروز", "1115",.)
replace city = subinstr( city ,"اردل", "1405",.)
replace city = subinstr( city ,"بجستان", "931",.)
replace city = subinstr( city ,"دلگان", "1112",.)
replace city = subinstr( city ,"ف2303مان", "922",.)
replace city = subinstr( city ,"ني 2303ز", "714",.)
replace city = subinstr( city ,"تكاب", "412",.)
replace city = subinstr( city ,"بردسکن", "923",.)
replace city = subinstr( city ,"نير", "2409",.)
replace city = subinstr( city ,"بن", "1409",.)
replace city = subinstr( city ,"رودسر", "107",.)
replace city = subinstr( city ,"زرقان", "730",.)
replace city = subinstr( city ,"پاسارگاد", "723",.)
replace city = subinstr( city ,"مينودشت", "2707",.)
replace city = subinstr( city ,"مهر", "721",.)
replace city = subinstr( city ,"بشرويه", "2908",.)
replace city = subinstr( city ,"جغتاي", "934",.)
replace city = subinstr( city ,"اسکو", "322",.)
replace city = subinstr( city ,"نکا", "219",.)
replace city = subinstr( city ,"فردوس", "2907",.)
replace city = subinstr( city ,"محلات", "9",.)
replace city = subinstr( city ,"فاروج", "2805",.)
replace city = subinstr( city ,"ابرکوه", "2107",.)
replace city = subinstr( city ,"دره شهر", "1602",.)
replace city = subinstr( city,"تنگستان", "1802",.)
replace city = subinstr( city ,"دامغان", "2001",.)
replace city = subinstr( city ,"پلدشت", "415",.)
replace city = subinstr( city ,"چاراويماق", "323",.)
replace city = subinstr( city ,"بهميي", "1705",.)
replace city = subinstr( city ,"قيروکارزين", "720",.)
replace city = subinstr( city ,"شهربابک", "807",.)
replace city = subinstr( city ,"منوجان", "813",.)
replace city = subinstr( city ,"تيران و کرون", "1019",.)
replace city = subinstr( city ,"نرماشير", "821",.)
replace city = subinstr( city ,"خاتم", "2109",.)
replace city = subinstr( city ,"ف2303دونشهر", "1007",.)
replace city = subinstr( city ,"فامنين", "1309",.)
replace city = subinstr( city ,"رامشير", "619",.)
replace city = subinstr( city ,"خلخال", "2403",.)
replace city = subinstr( city ,"كليبر", "315",.)
replace city = subinstr( city ,"سرباز", "1108",.)
replace city = subinstr( city ,"بندر كنگان", "1806",.)
replace city = subinstr( city ,"کهنوج", "809",.)
replace city = subinstr( city ,"سروستان", "725",.)
replace city = subinstr( city ,"ميرجاوه", "1117",.)
replace city = subinstr( city ,"كردكوي", "2704",.)
replace city = subinstr( city ,"اسفراين", "2801",.)
replace city = subinstr( city ,"باغ ملک", "615",.)
replace city = subinstr( city ,"انار", "820",.)
replace city = subinstr( city ,"فراهان", "13",.)
replace city = subinstr( city ,"فيروزه", "933",.)
replace city = subinstr( city ,"ماهنشان", "1909",.)
replace city = subinstr( city ,"درگز", "907",.)
replace city = subinstr( city ,"سميرم", "1005",.)
replace city = subinstr( city ,"جوين", "936",.)
replace city = subinstr( city ,"آران وبيدگل", "1018",.)
replace city = subinstr( city ,"عنبرآباد", "812",.)
replace city = subinstr( city ,"داو1308", "939",.)
replace city = subinstr( city ,"هويزه", "623",.)
replace city = subinstr( city ,"کوثر", "2407",.)
replace city = subinstr( city ,"هنديجان", "618",.)
replace city = subinstr( city ,"کنارک", "1109",.)
replace city = subinstr( city ,"آوج", "2606",.)
replace city = subinstr( city ,"شفت", "112",.)
replace city = subinstr( city ,"زهک", "1110",.)
replace city = subinstr( city ,"بينالود", "932",.)
replace city = subinstr( city ,"ملکشاهي", "1608",.)
replace city = subinstr( city ,"چايپاره", "416",.)
replace city = subinstr( city ,"کلاردشت", "228",.)
replace city = subinstr( city ,"چرداول", "1604",.)
replace city = subinstr( city ,"نه1409دان", "2905",.)
replace city = subinstr( city ,"دليجان", "5",.)
replace city = subinstr( city ,"فهرج", "819",.)
replace city = subinstr( city ,"زيرکوه", "2909",.)
replace city = subinstr( city ,"راور", "811",.)
replace city = subinstr( city ,"سرعين", "2410",.)
replace city = subinstr( city ,"اصلاندوز", "2411",.)
replace city = subinstr( city ,"فراش1409د", "722",.)
replace city = subinstr( city ,"دشتي", "1804",.)
replace city = subinstr( city ,"ارسنجان", "717",.)
replace city = subinstr( city ,"رابر", "818",.)
replace city = subinstr( city ,"اشنويه", "413",.)
replace city = subinstr( city ,"چرام", "1706",.)
replace city = subinstr( city ,"خدا آف2303ن", "326",.)
replace city = subinstr( city ,"قصرشي2303ن", "506",.)
replace city = subinstr( city ,"ورزقان", "324",.)
replace city = subinstr( city ,"208 شمالي", "227",.)
replace city = subinstr( city ,"بويين مياندشت", "1024",.)
replace city = subinstr( city ,"خوسف", "2910",.)
replace city = subinstr( city ,"فيروزکوه", "2314",.)
replace city = subinstr( city ,"ف2303دن", "1006",.)
replace city = subinstr( city ,"عسلويه", "1810",.)
replace city = subinstr( city ,"جاجرم", "2803",.)
replace city = subinstr( city ,"ايجرود", "1906",.)
replace city = subinstr( city ,"بردسير", "810",.)
replace city = subinstr( city ,"خوانسار", "1004",.)
replace city = subinstr( city ,"نائين", "1013",.)
replace city = subinstr( city ,"بوانات", "716",.)
replace city = subinstr( city ,"ثلاث باباجاني", "512",.)
replace city = subinstr( city ,"آشتيان", "2",.)
replace city = subinstr( city ,"بهاباد", "2111",.)
replace city = subinstr( city ,"دهاقان", "1021",.)
replace city = subinstr( city ,"اردکان", "2101",.)
replace city = subinstr( city ,"907ين", "1310",.)
replace city = subinstr( city ,"قلعه گنج", "816",.)
replace city = subinstr( city ,"خانميرزا", "1410",.)
replace city = subinstr( city ,"سي2303ک", "2212",.)
replace city = subinstr( city ,"لنده", "1708",.)
replace city = subinstr( city ,"بندر دير", "1805",.)
replace city = subinstr( city ,"رستم", "726",.)
replace city = subinstr( city ,"کوه1409ان", "814",.)
replace city = subinstr( city ,"هوراند", "327",.)
replace city = subinstr( city ,"آرادان", "2006",.)
replace city = subinstr( city ,"طالقان", "3004",.)
replace city = subinstr( city ,"802پور", "1120",.)
replace city = subinstr( city ,"ابوموسي", "2201",.)
replace city = subinstr( city ,"تفرش", "3",.)
replace city = subinstr( city ,"سيروان", "1609",.)
replace city = subinstr( city ,"چگني", "1512",.)

destring _all, force replace
save 980`i'.dta, replace

clear
}


forvalues i = 10(1)12{
import excel "Iran_maskan_koll98`i'.xlsx", sheet("Sheet1") firstrow
rename کدقرارداد id
encode نوعقرارداد ,generate(contType)
rename استان prov
rename شهرستان city
encode نوعملک ,generate(buildingType)
rename منطقهشهرداری district
encode نوعکاربری ,generate(usageType)
rename مساحت area
rename درصد percent
rename قیمت totalPrice
rename قیمتیکمترمربع price
rename عمربنا age
encode نوعاسکلت ,generate(frameType)
rename تاریخثبتقرارداد dateShamsi
replace dateShamsi = subinstr( dateShamsi ,"/" , "", .)
rename ششرقمنخستکدپستی postalCode
* drop نوعقرارداد نوعملک نوعکاربری نوعاسکلت
gen month = `i'

* Provinces
replace prov = subinstr( prov ,"خوزستان" , "6", .)
*replace prov = subinstr( prov ,"آذربايجان شرقي" , "3", .)
replace prov = subinstr( prov ,"آذربایجان شرقی" , "3", .)
replace prov = subinstr( prov ,"تهران" , "23", .)
replace prov = subinstr( prov ,"قم" , "25", .)
replace prov = subinstr( prov ,"ایلام" , "16", .)
*replace prov = subinstr( prov ,"خراسان رضوي" , "9", .)
replace prov = subinstr( prov ,"خراسان رضوی" , "9", .)
replace prov = subinstr( prov ,"كردستان" , "12", .)
replace prov = subinstr( prov ,"اصفهان" , "10", .)
replace prov = subinstr( prov ,"زنجان" , "19", .)
*replace prov = subinstr( prov ,"آذربايجان غربي" , "4", .)
replace prov = subinstr( prov ,"آذربایجان غربی" , "4", .)
replace prov = subinstr( prov ,"گلستان" , "27", .)
replace prov = subinstr( prov ,"بوشهر" , "18", .)
replace prov = subinstr( prov ,"سيستان وبلوچستان" , "11", .)
replace prov = subinstr( prov ,"كرمانشاه" , "5", .)
replace prov = subinstr( prov ,"كرمان" , "8", .)
replace prov = subinstr( prov ,"گیلان" , "1", .)
replace prov = subinstr( prov ,"مازندران" , "2", .)
*replace prov = subinstr( prov ,"مرکزي" , "0", .)
replace prov = subinstr( prov ,"مرکزی" , "0", .)
replace prov = subinstr( prov ,"سمنان" , "20", .)
replace prov = subinstr( prov ,"كهگيلويه وبويراحمد" , "17", .)
replace prov = subinstr( prov ,"فارس" , "7", .)
replace prov = subinstr( prov ,"البرز" , "30", .)
replace prov = subinstr( prov ,"یزد" , "21", .)
*replace prov = subinstr( prov ,"خراسان جنوبي" , "29", .)
replace prov = subinstr( prov ,"خراسان جنوبی" , "29", .)
*replace prov = subinstr( prov ,"چهارمحال وبختياري" , "14", .)
replace prov = subinstr( prov ,"چهارمحال وبختياري" , "14", .)
replace prov = subinstr( prov ,"اردبیل" , "24", .)
replace prov = subinstr( prov ,"لرستان" , "15", .)
replace prov = subinstr( prov ,"هرمزگان" , "22", .)
replace prov = subinstr( prov ,"همدان" , "13", .)
*replace prov = subinstr( prov ,"خراسان شمالي" , "28", .)
replace prov = subinstr( prov ,"خراسان شمالی" , "28", .)
replace prov = subinstr( prov ,"قزوین" , "26", .)

* Counties
replace city = subinstr( city ,"بابلسر", "216",.)
replace city = subinstr( city ,"زاهدان" , "1105", .)
replace city = subinstr( city ,"لالي" , "617", .)
replace city = subinstr( city ,"مرند" , "307", .)
replace city = subinstr( city ,"تهران" , "2301", .)
replace city = subinstr( city ,"قم" , "2501", .)
replace city = subinstr( city ,"رباط كريم" , "2312", .)
replace city = subinstr( city ,"مهران" , "1605", .)
replace city = subinstr( city ,"مشهد" , "916", .)
replace city = subinstr( city ,"مريوان" , "1206", .)
replace city = subinstr( city ,"اسلامشهر" , "2310", .)
replace city = subinstr( city ,"بهار" , "1307", .)
replace city = subinstr( city ,"آباده" , "701", .)
replace city = subinstr( city ,"خوي" , "403", .)
replace city = subinstr( city ,"شهرضا" , "1009", .)
replace city = subinstr( city ,"زنجان" , "1904", .)
replace city = subinstr( city ,"مياندوآب" , "408", .)
replace city = subinstr( city ,"ابهر" , "1901", .)
replace city = subinstr( city ,"تبريز" , "303", .)
replace city = subinstr( city ,"شميرانات" , "2304", .)
replace city = subinstr( city ,"جهرم" , "704", .)
replace city = subinstr( city ,"ملارد" , "2317", .)
replace city = subinstr( city ,"مهاباد" , "407", .)
replace city = subinstr( city ,"اصفهان" , "1002", .)
replace city = subinstr( city ,"قرچك" , "2321", .)
replace city = subinstr( city ,"عجب شير" , "325", .)
replace city = subinstr( city ,"گنبد كاووس" , "2706",.)
replace city = subinstr( city ,"بوشهر" , "1801",.)
replace city = subinstr( city ,"ري" , "2303",.)
replace city = subinstr( city ,"دشتستان" , "1803",.)
replace city = subinstr( city ,"برخوار" , "1022",.)
replace city = subinstr( city ,"کرج" , "3001",.)
replace city = subinstr( city ,"هامون" , "1116",.)

replace city = subinstr( city ,"كرمانشاه" , "502",.)

replace city = subinstr( city ,"كرمان" , "808",.)
replace city = subinstr( city ,"طوالش" , "104",.)
replace city = subinstr( city ,"جويبار" , "221",.)
replace city = subinstr( city ,"تاكستان" , "2602",.)
replace city = subinstr( city ,"زرنديه" , "10",.)
replace city = subinstr( city ,"سنندج" , "1204",.)
replace city = subinstr( city ,"خاش" , "1103",.)
replace city = subinstr( city ,"شاهين دژ" , "411",.)
replace city = subinstr( city ,"مسجدسليمان" , "613",.)
replace city = subinstr( city ,"سمنان" , "2002",.)
replace city = subinstr( city ,"جيرفت" , "803",.)
replace city = subinstr( city ,"سروآباد" , "1209",.)
replace city = subinstr( city ,"باشت" , "1707",.)
replace city = subinstr( city ,"كازرون" , "710",.)
replace city = subinstr( city ,"بهشهر" , "204",.)
replace city = subinstr( city ,"اهواز" , "603",.)
replace city = subinstr( city ,"شيراز" , "707",.)
replace city = subinstr( city ,"قزوين" , "2603",.)
replace city = subinstr( city ,"نوشهر" , "215",.)
replace city = subinstr( city ,"عباس آباد" , "224",.)
replace city = subinstr( city ,"خرم آباد" , "1503",.)
replace city = subinstr( city ,"گرگان" , "2705",.)
replace city = subinstr( city ,"اشکذر" , "2108",.)
replace city = subinstr( city ,"شه2303ار" , "2309",.)
replace city = subinstr( city ,"سا2303" , "207",.)
replace city = subinstr( city ,"مرودشت" , "712",.)
replace city = subinstr( city ,"نجف آباد" , "1014",.)


replace city = subinstr( city ,"1307ستان" , "2319",.)
replace city = subinstr( city ,"اروميه" , "401",.)
replace city = subinstr( city ,"مهدي شهر" , "2005",.)
replace city = subinstr( city ,"دزفول" , "608",.)
replace city = subinstr( city ,"يزد" , "2105",.)
replace city = subinstr( city ,"قصرقند" , "1118",.)
replace city = subinstr( city ,"نيشابور" , "917",.)
replace city = subinstr( city ,"چناران" , "918",.)
replace city = subinstr( city ,"باخرز" , "937",.)
replace city = subinstr( city ,"لنجان" , "1012",.)
replace city = subinstr( city ,"جوانرود" , "509",.)
replace city = subinstr( city ,"بابل" , "202",.)
replace city = subinstr( city ,"فنوج" , "1119",.)
replace city = subinstr( city ,"گرمه" , "2807",.)
replace city = subinstr( city ,"لاهيجان" , "111",.)
replace city = subinstr( city ,"لامرد" , "715",.)
replace city = subinstr( city ,"پيشوا" , "2318",.)
replace city = subinstr( city ,"قاينات" , "2904",.)
replace city = subinstr( city ,"شهركرد" , "1402",.)
replace city = subinstr( city ,"شازند" , "7",.)
replace city = subinstr( city ,"بندر انزلي" , "103",.)
replace city = subinstr( city ,"رشت" , "105",.)
replace city = subinstr( city ,"فيروز آباد" , "709",.)
replace city = subinstr( city ,"اردبيل" , "2401",.)
replace city = subinstr( city ,"سراب" , "305",.)
replace city = subinstr( city ,"مباركه" , "1017",.)
replace city = subinstr( city ,"ملاير" , "1302",.)
replace city = subinstr( city ,"خليل آباد" , "929",.)
replace city = subinstr( city ,"ايذه" , "604",.)
replace city = subinstr( city ,"سلطانيه" , "1910",.)
replace city = subinstr( city ,"گميشان" , "2713",.)
replace city = subinstr( city ,"پارس آباد" , "2406",.)
replace city = subinstr( city ,"قوچان" , "913",.)
replace city = subinstr( city ,"دورود" , "1505",.)
replace city = subinstr( city ,"آبادان" , "601",.)
replace city = subinstr( city ,"سنقر" , "505",.)
replace city = subinstr( city ,"ساوه" , "6",.)
replace city = subinstr( city ,"لردگان" , "1404",.)
replace city = subinstr( city ,"آستانه اشرفيه" , "102",.)
replace city = subinstr( city ,"رفسنجان" , "804",.)
replace city = subinstr( city ,"خمير" , "2210",.)
replace city = subinstr( city ,"آذرشهر" , "321",.)
replace city = subinstr( city ,"ايرانشهر" , "1101",.)
replace city = subinstr( city ,"همدان" , "1304",.)
replace city = subinstr( city ,"آمل" , "201",.)
replace city = subinstr( city ,"دلفان" , "1504",.)
replace city = subinstr( city ,"آق قلا" , "2708",.)
replace city = subinstr( city ,"رضوانشهر", "114",.)
replace city = subinstr( city ,"سرپل ذهاب", "504",.)
replace city = subinstr( city ,"بروجرد", "1502",.)
replace city = subinstr( city ,"بروچرد", "1502",.)

replace city = subinstr( city ,"خرمشهر", "607",.)
replace city = subinstr( city ,"ف2303دونکنار", "223",.)
replace city = subinstr( city ,"مانه و سملقان", "2806",.)
replace city = subinstr( city ,"حميديه", "625",.)
replace city = subinstr( city ,"بدره", "1610",.)
replace city = subinstr( city ,"خور و بيابانک", "1023",.)
replace city = subinstr( city ,"دشت آزادگان", "609",.)
replace city = subinstr( city ,"بيجار", "1202",.)
replace city = subinstr( city ,"ورامين", "2306",.)
replace city = subinstr( city ,"بيرجند", "2901",.)
replace city = subinstr( city ,"سبزوار", "908",.)
replace city = subinstr( city ,"رامسر", "206",.)
replace city = subinstr( city ,"اميديه", "616",.)
replace city = subinstr( city ,"بندرلنگه", "2203",.)
replace city = subinstr( city ,"گناباد", "915",.)
replace city = subinstr( city ,"کميجان", "11",.)
replace city = subinstr( city,"سپيدان", "706",.)
replace city = subinstr( city ,"نور", "214",.)
replace city = subinstr( city ,"شوش", "614",.)
replace city = subinstr( city ,"نهاوند", "1303",.)
replace city = subinstr( city ,"خواف", "919",.)
replace city = subinstr( city ,"علي اباد", "2703",.)
replace city = subinstr( city ,"شادگان", "611",.)
replace city = subinstr( city ,"زرند", "805",.)
replace city = subinstr( city ,"خميني شهر", "1003",.)
replace city = subinstr( city ,"ماكو", "406",.)
replace city = subinstr( city ,"ميناب", "2205",.)
replace city = subinstr( city ,"گرمي", "2405",.)
replace city = subinstr( city ,"سيرجان", "806",.)
replace city = subinstr( city ,"خرامه", "729",.)
replace city = subinstr( city ,"بروجن", "1401",.)
replace city = subinstr( city ,"فرديس", "3006",.)
replace city = subinstr( city ,"ساوجبلاغ", "3002",.)
replace city = subinstr( city ,"بندر ماهشهر", "605",.)
replace city = subinstr( city ,"چا1307", "1102",.)
replace city = subinstr( city ,"خرمدره", "1907",.)
replace city = subinstr( city ,"اسد آباد", "1306",.)
replace city = subinstr( city ,"سراوان", "1106",.)
replace city = subinstr( city ,"تربت حيد2303ه", "906",.)
*replace city = subinstr( city ,"202سر", "216",.)
replace city = subinstr( city ,"قروه", "1205",.)
replace city = subinstr( city ,"شيروان", "2804",.)
replace city = subinstr( city ,"قشم", "2204",.)
replace city = subinstr( city ,"کوهدشت", "1506",.)
replace city = subinstr( city ,"تويسركان", "1301",.)
replace city = subinstr( city ,"بوئين زهرا", "2601",.)
replace city = subinstr( city ,"خدابنده", "1903",.)
replace city = subinstr( city ,"مشگين شهر", "2404",.)
replace city = subinstr( city ,"ه2303س", "316",.)
replace city = subinstr( city ,"اهر", "302",.)
replace city = subinstr( city ,"پارسيان", "2211",.)
replace city = subinstr( city ,"اراك", "1",.)
replace city = subinstr( city ,"بوكان", "410",.)
replace city = subinstr( city ,"سيمرغ", "226",.)
replace city = subinstr( city ,"طارم", "1908",.)
replace city = subinstr( city ,"پاوه", "503",.)
replace city = subinstr( city ,"ماسال", "116",.)
replace city = subinstr( city ,"ميانه", "310",.)
replace city = subinstr( city ,"تربت جام", "906",.)
replace city = subinstr( city ,"دالاهو", "513",.)
replace city = subinstr( city ,"انديمشك", "602",.)
replace city = subinstr( city ,"قائم شهر", "210",.)
replace city = subinstr( city ,"ش302ود", "2003",.)
replace city = subinstr( city ,"ميان1505", "225",.)
replace city = subinstr( city ,"ز2303ن دشت", "719",.)
replace city = subinstr( city ,"شاهين شهر", "1016",.)
replace city = subinstr( city ,"ميامي", "2007",.)
replace city = subinstr( city ,"سردشت", "404",.)
replace city = subinstr( city ,"بندر عباس", "2202",.)
replace city = subinstr( city ,"بشاگرد", "2213",.)
replace city = subinstr( city ,"گلپايگان", "1011",.)
replace city = subinstr( city ,"بندر گناوه", "1807",.)
replace city = subinstr( city ,"تنكابن", "205",.)
replace city = subinstr( city ,"رومشکان", "1511",.)
replace city = subinstr( city ,"گيلانغرب", "508",.)
replace city = subinstr( city ,"بهبهان", "606",.)
replace city = subinstr( city ,"لارستان", "711",.)
replace city = subinstr( city ,"آزادشهر", "2710",.)
replace city = subinstr( city ,"داراب", "705",.)
replace city = subinstr( city ,"راميان", "2711",.)
replace city = subinstr( city ,"حاجي آباد", "2208",.)
replace city = subinstr( city ,"چادگان", "1020",.)
replace city = subinstr( city ,"كاشمر", "914",.)
replace city = subinstr( city ,"اقليد", "703",.)
replace city = subinstr( city ,"املش", "113",.)
replace city = subinstr( city ,"لنگرود", "110",.)
replace city = subinstr( city ,"نطنز", "1015",.)
replace city = subinstr( city ,"صومعه سرا", "108",.)
replace city = subinstr( city ,"صحنه", "510",.)
replace city = subinstr( city ,"فلاورجان", "1008",.)
replace city = subinstr( city ,"آغاجا2303", "626",.)
replace city = subinstr( city ,"هيرمند", "1111",.)
replace city = subinstr( city ,"ميبد", "2106",.)
replace city = subinstr( city ,"بندر ديلم", "1808",.)
replace city = subinstr( city ,"ايلام", "1601",.)
replace city = subinstr( city ,"بافت", "801",.)
replace city = subinstr( city ,"دهگلان", "1210",.)
replace city = subinstr( city ,"کوهرنگ", "1406",.)
replace city = subinstr( city ,"سلسله", "1509",.)
replace city = subinstr( city ,"مه ولات", "930",.)
replace city = subinstr( city ,"مهرستان", "1113",.)
replace city = subinstr( city ,"مراوه تپه", "2712",.)
replace city = subinstr( city ,"دماوند", "2302",.)
replace city = subinstr( city ,"آستارا", "101",.)
replace city = subinstr( city ,"نقده", "409",.)
replace city = subinstr( city ,"پاكدشت", "2313",.)
replace city = subinstr( city ,"نظر آباد", "3003",.)
replace city = subinstr( city ,"سرخه", "2008",.)
replace city = subinstr( city ,"هشترود", "311",.)
replace city = subinstr( city ,"هفتگل", "622",.)
replace city = subinstr( city ,"رزن", "1308",.)
replace city = subinstr( city ,"خمين", "4",.)
replace city = subinstr( city ,"شهر قدس", "2316",.)
replace city = subinstr( city ,"مراغه", "306",.)
replace city = subinstr( city ,"كنگاور", "507",.)
replace city = subinstr( city ,"بويراحمد", "1701",.)
replace city = subinstr( city ,"سقز", "1203",.)
replace city = subinstr( city ,"بستان آباد", "313",.)
replace city = subinstr( city,"سلماس", "405",.)
replace city = subinstr( city ,"نمين", "2408",.)
replace city = subinstr( city ,"گلوگاه", "222",.)
replace city = subinstr( city ,"تايباد", "904",.)
replace city = subinstr( city ,"استهبان", "702",.)
replace city = subinstr( city ,"دوره", "1510",.)
replace city = subinstr( city ,"کوار", "728",.)
replace city = subinstr( city ,"فسا", "708",.)
replace city = subinstr( city ,"بناب", "312",.)
replace city = subinstr( city ,"کلات", "928",.)
replace city = subinstr( city ,"ممسني", "713",.)
replace city = subinstr( city ,"البرز", "2605",.)
replace city = subinstr( city ,"سربيشه", "2903",.)
replace city = subinstr( city ,"كاشان", "1010",.)
replace city = subinstr( city ,"سرايان", "2906",.)
replace city = subinstr( city ,"فومن", "109",.)
replace city = subinstr( city ,"2303گان", "817",.)
replace city = subinstr( city ,"گراش", "727",.)
replace city = subinstr( city ,"چالوس", "220",.)
replace city = subinstr( city ,"سامان", "1408",.)
replace city = subinstr( city ,"کيار", "1407",.)
replace city = subinstr( city ,"جاسک", "2206",.)
replace city = subinstr( city ,"ملکان", "320",.)
replace city = subinstr( city ,"دنا", "1704",.)
replace city = subinstr( city ,"درميان", "2902",.)
replace city = subinstr( city ,"نيک شهر", "1107",.)
replace city = subinstr( city ,"پرديس", "2320",.)
replace city = subinstr( city ,"راز و جرگلان", "2808",.)
replace city = subinstr( city ,"کامياران", "1208",.)
replace city = subinstr( city ,"اردستان", "1001",.)
replace city = subinstr( city ,"ارزوييه", "823",.)
replace city = subinstr( city ,"سرخس", "920",.)
replace city = subinstr( city ,"فارسان", "1403",.)
replace city = subinstr( city ,"بافق", "2102",.)
replace city = subinstr( city ,"خنج", "724",.)
replace city = subinstr( city ,"آبدانان", "1606",.)
replace city = subinstr( city ,"اسلام آباد غرب", "501",.)
replace city = subinstr( city ,"رامهرمز", "610",.)
replace city = subinstr( city ,"جلفا", "319",.)
replace city = subinstr( city ,"شبستر", "314",.)
replace city = subinstr( city ,"روانسر", "514",.)
replace city = subinstr( city ,"مه2303ز", "2104",.)
replace city = subinstr( city ,"بندرتركمن", "2702",.)
replace city = subinstr( city ,"گرمسار", "2004",.)
replace city = subinstr( city ,"خرم بيد", "718",.)
replace city = subinstr( city ,"زاوه", "935",.)
replace city = subinstr( city ,"کهگيلويه", "1702",.)
replace city = subinstr( city ,"تفت", "2103",.)
replace city = subinstr( city ,"رودان", "2207",.)
replace city = subinstr( city ,"رودبار", "106",.)
replace city = subinstr( city ,"سيب و سوران", "1114",.)
replace city = subinstr( city ,"بيله سوار", "2402",.)
replace city = subinstr( city ,"باوي", "624",.)
replace city = subinstr( city ,"فا2303اب", "822",.)
replace city = subinstr( city ,"614تر", "612",.)
replace city = subinstr( city ,"گتوند", "620",.)
replace city = subinstr( city ,"ديواندره", "1207",.)
replace city = subinstr( city ,"دهلران", "1603",.)
replace city = subinstr( city ,"بم", "802",.)
replace city = subinstr( city ,"اشتهارد", "3005",.)
replace city = subinstr( city ,"کبودرآهنگ", "1305",.)
replace city = subinstr( city ,"ازنا", "1507",.)
replace city = subinstr( city ,"پيرانشهر", "402",.)
replace city = subinstr( city ,"چالدران", "414",.)
replace city = subinstr( city ,"خنداب", "12",.)
replace city = subinstr( city ,"بج214د", "2802",.)
replace city = subinstr( city ,"اليگودرز", "1501",.)
replace city = subinstr( city ,"گاليکش", "2714",.)
replace city = subinstr( city ,"کلاله", "2709",.)
replace city = subinstr( city ,"جم", "1809",.)
replace city = subinstr( city ,"زابل", "1104",.)
replace city = subinstr( city ,"بستک", "2209",.)
replace city = subinstr( city ,"بندرگز", "2701",.)
replace city = subinstr( city ,"ايوان", "1607",.)
replace city = subinstr( city ,"شوط", "417",.)
replace city = subinstr( city ,"105خوار", "927",.)
replace city= subinstr( city ,"آبيك", "2604",.)
replace city = subinstr( city ,"بانه", "1201",.)
replace city = subinstr( city ,"طبس", "2911",.)
replace city = subinstr( city ,"106جنوب", "815",.)
replace city = subinstr( city ,"کارون", "627",.)
replace city = subinstr( city ,"هرسين", "511",.)
replace city = subinstr( city ,"گچساران", "1703",.)
replace city = subinstr( city ,"سوادکوه", "208",.)
replace city = subinstr( city ,"محمودآباد", "218",.)
replace city = subinstr( city ,"صالح آباد", "940",.)
replace city = subinstr( city ,"سياهكل", "115",.)
replace city = subinstr( city ,"پلدختر", "1508",.)
replace city = subinstr( city ,"انديکا", "621",.)
replace city = subinstr( city ,"خوشاب", "938",.)
replace city = subinstr( city ,"نيمروز", "1115",.)
replace city = subinstr( city ,"اردل", "1405",.)
replace city = subinstr( city ,"بجستان", "931",.)
replace city = subinstr( city ,"دلگان", "1112",.)
replace city = subinstr( city ,"ف2303مان", "922",.)
replace city = subinstr( city ,"ني 2303ز", "714",.)
replace city = subinstr( city ,"تكاب", "412",.)
replace city = subinstr( city ,"بردسکن", "923",.)
replace city = subinstr( city ,"نير", "2409",.)
replace city = subinstr( city ,"بن", "1409",.)
replace city = subinstr( city ,"رودسر", "107",.)
replace city = subinstr( city ,"زرقان", "730",.)
replace city = subinstr( city ,"پاسارگاد", "723",.)
replace city = subinstr( city ,"مينودشت", "2707",.)
replace city = subinstr( city ,"مهر", "721",.)
replace city = subinstr( city ,"بشرويه", "2908",.)
replace city = subinstr( city ,"جغتاي", "934",.)
replace city = subinstr( city ,"اسکو", "322",.)
replace city = subinstr( city ,"نکا", "219",.)
replace city = subinstr( city ,"فردوس", "2907",.)
replace city = subinstr( city ,"محلات", "9",.)
replace city = subinstr( city ,"فاروج", "2805",.)
replace city = subinstr( city ,"ابرکوه", "2107",.)
replace city = subinstr( city ,"دره شهر", "1602",.)
replace city = subinstr( city,"تنگستان", "1802",.)
replace city = subinstr( city ,"دامغان", "2001",.)
replace city = subinstr( city ,"پلدشت", "415",.)
replace city = subinstr( city ,"چاراويماق", "323",.)
replace city = subinstr( city ,"بهميي", "1705",.)
replace city = subinstr( city ,"قيروکارزين", "720",.)
replace city = subinstr( city ,"شهربابک", "807",.)
replace city = subinstr( city ,"منوجان", "813",.)
replace city = subinstr( city ,"تيران و کرون", "1019",.)
replace city = subinstr( city ,"نرماشير", "821",.)
replace city = subinstr( city ,"خاتم", "2109",.)
replace city = subinstr( city ,"ف2303دونشهر", "1007",.)
replace city = subinstr( city ,"فامنين", "1309",.)
replace city = subinstr( city ,"رامشير", "619",.)
replace city = subinstr( city ,"خلخال", "2403",.)
replace city = subinstr( city ,"كليبر", "315",.)
replace city = subinstr( city ,"سرباز", "1108",.)
replace city = subinstr( city ,"بندر كنگان", "1806",.)
replace city = subinstr( city ,"کهنوج", "809",.)
replace city = subinstr( city ,"سروستان", "725",.)
replace city = subinstr( city ,"ميرجاوه", "1117",.)
replace city = subinstr( city ,"كردكوي", "2704",.)
replace city = subinstr( city ,"اسفراين", "2801",.)
replace city = subinstr( city ,"باغ ملک", "615",.)
replace city = subinstr( city ,"انار", "820",.)
replace city = subinstr( city ,"فراهان", "13",.)
replace city = subinstr( city ,"فيروزه", "933",.)
replace city = subinstr( city ,"ماهنشان", "1909",.)
replace city = subinstr( city ,"درگز", "907",.)
replace city = subinstr( city ,"سميرم", "1005",.)
replace city = subinstr( city ,"جوين", "936",.)
replace city = subinstr( city ,"آران وبيدگل", "1018",.)
replace city = subinstr( city ,"عنبرآباد", "812",.)
replace city = subinstr( city ,"داو1308", "939",.)
replace city = subinstr( city ,"هويزه", "623",.)
replace city = subinstr( city ,"کوثر", "2407",.)
replace city = subinstr( city ,"هنديجان", "618",.)
replace city = subinstr( city ,"کنارک", "1109",.)
replace city = subinstr( city ,"آوج", "2606",.)
replace city = subinstr( city ,"شفت", "112",.)
replace city = subinstr( city ,"زهک", "1110",.)
replace city = subinstr( city ,"بينالود", "932",.)
replace city = subinstr( city ,"ملکشاهي", "1608",.)
replace city = subinstr( city ,"چايپاره", "416",.)
replace city = subinstr( city ,"کلاردشت", "228",.)
replace city = subinstr( city ,"چرداول", "1604",.)
replace city = subinstr( city ,"نه1409دان", "2905",.)
replace city = subinstr( city ,"دليجان", "5",.)
replace city = subinstr( city ,"فهرج", "819",.)
replace city = subinstr( city ,"زيرکوه", "2909",.)
replace city = subinstr( city ,"راور", "811",.)
replace city = subinstr( city ,"سرعين", "2410",.)
replace city = subinstr( city ,"اصلاندوز", "2411",.)
replace city = subinstr( city ,"فراش1409د", "722",.)
replace city = subinstr( city ,"دشتي", "1804",.)
replace city = subinstr( city ,"ارسنجان", "717",.)
replace city = subinstr( city ,"رابر", "818",.)
replace city = subinstr( city ,"اشنويه", "413",.)
replace city = subinstr( city ,"چرام", "1706",.)
replace city = subinstr( city ,"خدا آف2303ن", "326",.)
replace city = subinstr( city ,"قصرشي2303ن", "506",.)
replace city = subinstr( city ,"ورزقان", "324",.)
replace city = subinstr( city ,"208 شمالي", "227",.)
replace city = subinstr( city ,"بويين مياندشت", "1024",.)
replace city = subinstr( city ,"خوسف", "2910",.)
replace city = subinstr( city ,"فيروزکوه", "2314",.)
replace city = subinstr( city ,"ف2303دن", "1006",.)
replace city = subinstr( city ,"عسلويه", "1810",.)
replace city = subinstr( city ,"جاجرم", "2803",.)
replace city = subinstr( city ,"ايجرود", "1906",.)
replace city = subinstr( city ,"بردسير", "810",.)
replace city = subinstr( city ,"خوانسار", "1004",.)
replace city = subinstr( city ,"نائين", "1013",.)
replace city = subinstr( city ,"بوانات", "716",.)
replace city = subinstr( city ,"ثلاث باباجاني", "512",.)
replace city = subinstr( city ,"آشتيان", "2",.)
replace city = subinstr( city ,"بهاباد", "2111",.)
replace city = subinstr( city ,"دهاقان", "1021",.)
replace city = subinstr( city ,"اردکان", "2101",.)
replace city = subinstr( city ,"907ين", "1310",.)
replace city = subinstr( city ,"قلعه گنج", "816",.)
replace city = subinstr( city ,"خانميرزا", "1410",.)
replace city = subinstr( city ,"سي2303ک", "2212",.)
replace city = subinstr( city ,"لنده", "1708",.)
replace city = subinstr( city ,"بندر دير", "1805",.)
replace city = subinstr( city ,"رستم", "726",.)
replace city = subinstr( city ,"کوه1409ان", "814",.)
replace city = subinstr( city ,"هوراند", "327",.)
replace city = subinstr( city ,"آرادان", "2006",.)
replace city = subinstr( city ,"طالقان", "3004",.)
replace city = subinstr( city ,"802پور", "1120",.)
replace city = subinstr( city ,"ابوموسي", "2201",.)
replace city = subinstr( city ,"تفرش", "3",.)
replace city = subinstr( city ,"سيروان", "1609",.)
replace city = subinstr( city ,"چگني", "1512",.)


destring _all, force replace
save 98`i'.dta, replace

clear
}

use "9801.dta"
append using "9802.dta" "9803.dta" "9804.dta" "9805.dta" "9806.dta" "9807.dta" "9808.dta" "9809.dta" "9810.dta" "9811.dta" "9812.dta" 
save "98country.dta" , replace

*drop if city !=2301
*save "98tehran.dta" , replace
use 98country
preserve
collapse (mean) area price age totalPrice, by(postalCode)
save postalCodeCollapse.dta, replace
restore
preserve
collapse (mean) area price age totalPrice, by(city)
save cityCollapse.dta, replace
restore
preserve
collapse (mean) area price age totalPrice, by(prov)
save provCollapse.dta, replace
restore
